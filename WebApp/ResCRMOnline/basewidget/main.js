(function(e,t){typeof define=="function"&&define.amd&&define("h5.main",[],t),e.cPublic=t()})(this,function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){var n=p.call(arguments,0);return typeof n[0]!="string"&&n.length===1&&n.push(null),s.apply(r,n.concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../almond",function(){}),n("text",["module"],function(e){"use strict";var n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f="undefined"!=typeof location&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||void 0),p=[],d=e.config&&e.config()||{};return n={version:"2.0.5+",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),-1!==s&&(i="strip"===r.substring(s+1),r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var s,o,u,a=n.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],!(s&&s!==t||o&&o.toLowerCase()!==r.toLowerCase()||(u||o)&&u!==i)):!0},finishLoad:function(e,t,r,i){r=t?n.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,t,r,i){if(i.isBuild&&!i.inlineText)return void r();d.isBuild=i.isBuild;var s=n.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=t.toUrl(o),a=d.useXhr||n.useXhr;!f||a(u,l,c,h)?n.get(u,function(t){n.finishLoad(e,s.strip,t,r)},function(e){r.error&&r.error(e)}):t([o],function(e){n.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,t,r){if(p.hasOwnProperty(t)){var i=n.jsEscape(p[t]);r.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,r,i,s){var o=n.parseName(t),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";n.load(a,r,function(){var t=function(e){return i(f,e)};t.asModule=function(e,t){return i.asModule(e,f,t)},n.write(e,a,t,s)},s)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=t.nodeRequire("fs"),n.get=function(e,t){var n=r.readFileSync(e,"utf8");0===n.indexOf("ï»¿")&&(n=n.substring(1)),t(n)}):"xhr"===d.env||!d.env&&n.createXhr()?n.get=function(e,t,r,i){var s,o=n.createXhr();if(o.open("GET",e,!0),i)for(s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),i[s]);d.onXhr&&d.onXhr(o,e),o.onreadystatechange=function(){var n,i;4===o.readyState&&(n=o.status,n>399&&600>n?(i=new Error(e+" HTTP status: "+n),i.xhr=o,r(i)):t(o.responseText))},o.send(null)}:"rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{for(n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=u.readLine());)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)}:("xpconnect"===d.env||!d.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),n.get=function(e,t){var n,r,o={},u=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(u,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}}),n});var r=function(e){return"text!template/"+e+".html"};return e.config({baseUrl:"./",paths:{network:"basewidget/network/network",collect:"basewidget/collect/collect",prompt:"basewidget/prompt/prompt",ctripmenu:"basewidget/ctripmenu/ctripmenu",pull:"basewidget/pull/pull",pulldown:"basewidget/pulldown/pulldown",scroll:"basewidget/scroll/scroll",base:"utils/base"}}),n("main",function(){}),n("class",["base"],function(e){var t=function(e){var t=function(){this.init.apply(this,arguments)};if(e){var n=function(){};n.prototype=e.prototype,t.prototype=new n}return t.prototype.init=function(){},t.fn=t.prototype,t.fn.parent=t,t._super=t.__proto__,t.extend=function(e){var n=e.extended;for(var r in e)t[r]=e[r];n&&n(t)},t.include=function(e){var n=e.included;for(var r in e)t.fn[r]=e[r];n&&n(t)},t};return t}),n("base",["class"],function(e){var t=new e,n={},r=n.toString;"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach(function(e){n["[object "+e+"]"]=e.toLowerCase()});var i=function(e){return e==null?String(e):n[r.call(e)]||"object"};return t.extend({init:function(){},isPreProduction:function(){return localStorage.getItem("isPreProduction")},isObject:function(e){return i(e)=="object"},isBool:function(e){return i(e)=="boolean"},isNumeric:function(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)},isArray:Array.isArray||function(e){return e instanceof Array},has:function(e){return Array.isArray(e)?e.length>0:$(e)&&$(e).length>0},keys:function(e){var t=[];for(t[t.length]in e);return t},values:function(e){var t=this.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},unique:function(e){var t={},n=[];for(var r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},isPC:function(){var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod","BB10","PlayBook","Macintosh","KFAPWI","KFTHWI"],n=!0;for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>0){n=!1;break}return n},isIOS:function(){var e=navigator.userAgent;return/iPhone|iPad|Mac OS X/g.test(e)&&e.indexOf("Safari")>-1},isInApp:function(){var e=navigator.userAgent,t=!1,n=window.localStorage.getItem("isInApp")||window.localStorage.getItem("ISINAPP");return e.indexOf("CtripWireless")>-1&&(t=!0),n&&(t=n=="1"),t},channel:function(){return this.isPC()?1:this.isInApp()?3:2},deviceEnv:function(){var e=navigator.userAgent,t=/ipad|android/i,n=!this.isInApp()&&!t.test(e)&&$(window).width()>767,r=e.match(/Ctrip_Pad_App/i),i;return n?i=0:r?i=10:t.test(e)&&$(window).width()>767?i=11:this.isInApp()&&$(window).width()<768?i=20:i=21,i},parent:function(e){return $(e&&typeof e=="string"&&/(\.|#)(\w|-)+/.test(e)?e:"#main")},getHeadStore:function(){var e=localStorage.getItem("HEADSTORE");return e&&JSON.parse(e)},isLogin:function(){var e=localStorage.getItem("USER"),t=e&&JSON.parse(e)||null,n=+(new Date),r;if(!t||!t.value||!t.value.Auth||!t.timeout)return!1;if(t&&t.timeout)return r=+(new Date(t.timeout.replace(/-/g,"/"))),r-n>=0},loginAction:function(){var e=window.location.host,t="accounts.ctrip.com",n="https://"+t+"/H5Login/#login";if(e.match(/^m\.ctrip\.com/i))t="accounts.ctrip.com";else if(e.match(/\.uat\.qa/i))t="accounts.uat.qa.nt.ctripcorp.com";else if(e.match(/\.fat/i)||e.match(/\.fws/i)||e.match(/^(localhost|172\.16|127\.0)/i))t="accounts.fat49.qa.nt.ctripcorp.com";window.location.href=n},getEnv:function(){if(this.isInApp())return this.isPreProduction()=="1"?"baolei":this.isPreProduction()=="0"?"test":this.isPreProduction()=="2"?"uat":"pro";var e=location&&location.hostname;return e.match(/^(localhost|172\.16|127\.0)/i)?"local":e.match(/m\.fat\d*\.qa\.nt\.ctripcorp\.com|^210\.13\.100\.191/i)?"test":e.match(/^m\.uat\.qa\.nt\.ctripcorp\.com/i)?"uat":e.match(/^10\.8\.2\.111/i)||e.match(/^10\.8\.5\.10/i)?"baolei":"pro"},loadStyle:function(){if(this.getEnv()==="local"&&location.href.indexOf("?test=cPublic")>-1)return this.has("#cpH5MainCss")?"":'<link href="main.css" type="text/css" rel="stylesheet" id="cpH5MainCss"/>';if(this.isInApp())return this.has("#cpH5MainCss")?"":'<link href="../basewidget/res/style/main.css" type="text/css" rel="stylesheet" id="cpH5MainCss"/>';var e=location.protocol+"//webresource.c-ctrip.com/ResCRMOnline/R5/basewidget/main.css";return this.has("#cpH5MainCss")?"":"<link href='"+e+"' type='text/css' rel='stylesheet' id='cpH5MainCss' />"},getProtocol:function(){var e=location.protocol&&location.protocol.slice(0,-1),t=e!=="file"?e:"http";return t},getMethod:function(){return this.getProtocol()==="http"?"gateway":"common"},prompt:function(e){var t=$(".cp-h5-collect-toast"),n=!t.html();n&&(t=$('<div class=cp-h5-collect-toast style="left:50%; margin-left:-130px; visibility: visible; z-index: 113003; top: 50%; position: fixed; display: none;"><div style="width: 220px; line-height: 24px; border-radius: 5px; background: rgba(0,0,0,.7); padding: 10px 15px; color: #fff; font-weight: 700; text-align: center; word-break: break-all;"><div class=cui-layer-content></div></div></div>'),$("body").append(t)),t.show().find(".cui-layer-content").html(e),setTimeout(function(){t[n?"remove":"hide"]()},2e3)},delegate:function(e){function s(e){t.every(function(t,s){return e.type==r[s]?i[s][0]=="#"&&e.target.id==i[s].slice(1)?(n[s].call(this,e),!1):i[s][0]=="."&&e.target.classList.contains(i[s].slice(1))?(n[s].call(this,e),!1):!0:!0})}var t=this.keys(e),n=this.values(e),r=[],i=[];t.forEach(function(e,t){var n=e.split(" ");r.push(n[0]),i.push(n[1])}),this.unique(r).forEach(function(e){$(".cp-h5-main").off(e).on(e,s)})},base64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n,r,i,s,o,u;i=e.length,r=0,n="";while(r<i){s=e.charCodeAt(r++)&255;if(r==i){n+=t.charAt(s>>2),n+=t.charAt((s&3)<<4),n+="==";break}o=e.charCodeAt(r++);if(r==i){n+=t.charAt(s>>2),n+=t.charAt((s&3)<<4|(o&240)>>4),n+=t.charAt((o&15)<<2),n+="=";break}u=e.charCodeAt(r++),n+=t.charAt(s>>2),n+=t.charAt((s&3)<<4|(o&240)>>4),n+=t.charAt((o&15)<<2|(u&192)>>6),n+=t.charAt(u&63)}return n}}),$("head").append(t.loadStyle()),t}),n("network",["base","class"],function(e,t){var n=new t,r=[],i=[],s=".cp-Network-loadFailed",o=".cp-Network-loadFailedWithCall",u=".cp-Network-loading",a=".cp-Network-loadingForSubmit",f=".cp-Network-noSearch",l=".cp-Network-load404",c="keepheader,keepfooter,fullscreen,keepboth",h={loadFailed:'<div class="cp-h5-main" style="background-color:#fff;"><div class="cp-Network-loadFailed loadFailed-box"><div class="loadFailed-animate"><div class="bubble"></div><div class="eyebrow"></div><div class="tail"></div><div class="tear"></div><div class="l-hand"></div><div class="r-hand" style="z-index: 0;"></div><div class="text"></div></div><p>ç½ç»ä¸ç»åï¼è¯·åè¯è¯å§ã</p><div class="btns"><span class="btn-retry">éè¯</span></div></div></div>',loadFailedWithCall:'<div class="cp-h5-main" style="background-color:#fff;"><div class="cp-Network-loadFailedWithCall cp-Network-loadFailed loadFailed-box"><div class="loadFailed-animate"><div class="bubble"></div><div class="eyebrow"></div><div class="tail"></div><div class="tear"></div><div class="l-hand"></div><div class="r-hand" style="z-index: 0;"></div><div class="text"></div></div><div class="text"></div><p>ç½ç»ä¸ç»åï¼è¯·åè¯è¯å§ã</p><p>æ¨ä¹å¯ä»¥æ¨æå®¢æçµè¯ã</p><div class="btns"><span class="btn-retry">éè¯</span><div class="line-spacing"></div><span class="btn-call">èç³»å®¢æ</span></div></div></div></div>',loading:'<div class="cp-h5-main" style="background-color:#fff;"><div class="cp-Network-loading loading-box"><div class="loading-animate"><div class="bubble"></div><div class="eye"></div><div class="eye2"></div><div class="tail"></div><div class="tear"></div><div class="l-hand"></div><div class="r-hand" style="z-index: 0;"></div><div class="text"></div><div class="sweat"></div></div><p><i class="i-loading"></i>æ¸¸æ¸¸åªåå è½½ä¸­...</p></div></div>',loadingForSubmit:'<div class="cp-h5-main" style="width:100%;background-color:rgba(0,0,0,0.7);position: fixed;z-index:9999;"><div class="cp-Network-loadingForSubmit loading-box"><div class="loading-layer">æ¸¸æ¸¸åªåæäº¤ä¸­... </div></div></div>',noSearch:'<div class="cp-h5-main" style="background-color:#fff;"><div class="cp-Network-noSearch loadNosearch-box"><div class="nosearch-animate"></div><p>æ¾ä¸å°ï¼æ¢ä¸ªè¯è¯å§...</p></div></div>',load404:'<div class="cp-h5-main" style="background-color:#fff;"><div class="cp-Network-load404 load404-box"><div class="load404-animate"><div class="body"><div class="eyes"></div><div class="r-hand"></div><div class="l-hand"></div><div class="bubble"></div><div class="tail"></div><div class="nofind">404</div></div><div class="bubble"></div></div><p>æ¸¸æ¸¸è¿·è·¯äºï¼<br>ä½ è½å¸¦æåé¦é¡µåï¼</p><div class="btns"><span class="btn-retry">è¿åé¦é¡µ</span></div></div></div>'};return n.include({init:function(){var t=arguments[0];if(!t||typeof t!="object")t={};this.parentNodes=t.parent&&typeof t.parent=="string"&&/(\.|#)(\w|-)+/.test(t.parent)?t.parent:"#main";var n=t.screen&&t.screen.toLowerCase();this.screen=typeof n=="string"&&c.indexOf(n)>-1?n:"keepheader",this.zIndex=e.isNumeric(t.zIndex)?t.zIndex:10,this.position=t.position||"absolute";var r=function(t){return e.isNumeric(t)?t:0},i=r(t.header),s=r(t.footer);this.l=r(t.left),this.r=r(t.right),this.t=i===null?0:i,this.b=s===null?0:s},__setCss:function(t){var n=this;return function(r){var i=n.position=="absolute"||n.position=="fixed",s=function(n){e.isNumeric(r[n])&&(i?t.css(n,r[n]):t.css("margin-"+n,r[n]))};for(var o in r)s(o);e.isNumeric(r.zIndex)&&i&&t.css({zIndex:r.zIndex})}},__open:function(e){var t=e.replace(/\.cp-Network-/,""),n=h[t],s=$(n);s.css({position:this.position}),this.parent=$(this.parentNodes),this.parent.prop("id")!=="main"&&this.position=="absolute"&&this.parent.css({position:"relative"});var o=this.__setCss(s);switch(this.screen){case"keepheader":o({top:this.t,bottom:0});break;case"keepfooter":o({bottom:this.b,top:0});break;case"fullscreen":o({top:0,bottom:0});break;case"keepboth":o({top:this.t,bottom:this.b});break;default:o({top:this.t,bottom:0})}o({left:this.l,right:this.r,zIndex:this.zIndex}),this.parent.append(s),this.$id=$(e),this.$parent=this.$id.parent(),r.push(this.$parent),i.push(t),this.retryBtn=this.parent.find(".btn-retry"),this.callBtn=this.parent.find(".btn-call"),this.closeBtn=this.parent.find(".close")},__close:function(){this.$parent.remove()},__callback:function(e){var t=this;return e&&e(function(){t.__close()})},__hidden:function(e,t){var n=e==="close"?"remove":"hide";if(!t)r.forEach(function(e,t){e[n]()});else{var s=i.indexOf(t);s>-1?r[s][n]():console.warn("no this element!")}},close:function(e){this.__hidden("close",e)},hide:function(e){this.__hidden("hide",e)},loadFailed:function(e){var t=this;this.__open(s),this.retryBtn.off("click").on("click",function(){return t.__callback.call(t,e)})},loadFailedWithCall:function(e,t){var n=this;this.__open(o),this.retryBtn.off("click").on("click",function(){return n.__callback.call(n,t)}),this.callBtn.off("click").on("click",function(){window.location.href="tel:"+(e||"8008206666")})},loading:function(e){return this.__open(u),this.__callback.call(this,e)},loadingForSubmit:function(t,n){var r=this;typeof t=="function"&&(n=t),t=e.isNumeric(t)?t:0;var i=function(){return r.__open(a),r.__callback.call(r,n)};return t>0?setTimeout(i,t):i()},noSearch:function(e){return this.__open(f),this.__callback.call(this,e)},load404:function(e){var t=this;this.__open(l),this.retryBtn.off("click").on("click",function(){return location.href="/",t.__callback.call(t,e)})}}),n}),n("ajax",["base","class"],function(e,t){var n=location.host,r=e.getProtocol(),i=e.getMethod(),s=new t;return s.include({baseurl:function(t){var n="m.ctrip.com",r={local:{https:{common:{domain:"secure.fat19.qa.nt.ctripcorp.com",path:"restapi"}},http:{common:{domain:"gateway.m.fws.qa.nt.ctripcorp.com",path:"restapi"},gateway:{domain:"gateway.m.fws.qa.nt.ctripcorp.com",path:"restapi"},cruise_gateway:{domain:"orderws.cruise.fat6.qa.nt.ctripcorp.com",path:"Cruise-Order-OpenAPI"}}},test:{https:{common:{domain:"secure.fat19.qa.nt.ctripcorp.com",path:"restapi"}},http:{common:{domain:"gateway.m.fws.qa.nt.ctripcorp.com",path:"restapi"},gateway:{domain:"gateway.m.fws.qa.nt.ctripcorp.com",path:"restapi"},cruise_gateway:{domain:"orderws.cruise.fat6.qa.nt.ctripcorp.com",path:"Cruise-Order-OpenAPI"}}},uat:{https:{common:{domain:"restful.m.uat.qa.nt.ctripcorp.com",path:"restapi"}},http:{common:{domain:"gateway.m.uat.qa.nt.ctripcorp.com",path:"restapi"},gateway:{domain:"gateway.m.uat.qa.nt.ctripcorp.com",path:"restapi"},cruise_gateway:{domain:"orderws.cruise.fat6.qa.nt.ctripcorp.com",path:"Cruise-Order-OpenAPI"}}},baolei:{https:{common:{domain:"10.8.5.99",path:"restapi"}},http:{common:{domain:"10.8.14.28:8080",path:"restapi"},gateway:{domain:"10.8.14.28:8080",path:"restapi"},cruise_gateway:{domain:"orderws.cruise.fat6.qa.nt.ctripcorp.com",path:"Cruise-Order-OpenAPI"}}},pro:{https:{common:{domain:"wpg.ctrip.com",path:"restapi"}},http:{common:{domain:"m.ctrip.com",path:"restapi"},gateway:{domain:"m.ctrip.com",path:"restapi"},cruise_gateway:{domain:"m.ctrip.com",path:"restapi"}}}};return n=r[e.getEnv()][this.protocol][this.method].domain,n},buildurl:function(e){var t=this.baseurl(),n=r+"://"+t+"/";return n},setting:function(e){if(!e||typeof e!="object"||!e.interface){console.error("options parameters error");return}this.method=e.method||i,this.protocol=e.protocol||r,this.requestUrl=this.buildurl()+e.interface},send:function(t,n,r,i){var s=this,i=i||"POST",o=e.getHeadStore();if(!o||typeof o.value!="object"||!e.isLogin())return r({errorMsg:"notLoggedIn"});var u={};u.head=o.value;if(typeof n=="object")for(var a in n)u[a]=n[a];$.ajax({url:this.requestUrl+t,type:i,dataType:"json",data:JSON.stringify(u),contentType:"application/json",success:function(e){return r(null,e)},error:function(e,t){return r({errorMsg:t})}})}}),s}),n("model",["base","ajax","class"],function(e,t,n){var r=new t;r.setting({"interface":"restapi/soa2/10108/json/"});var i={addProduct:function(e,t,n){r.send("myfavoritesadd",{FavoriteList:e,Channel:t},function(e,t){return e?n(e):n(null,t)})},deleteProduct:function(e,t){r.send("myfavoritesdelete",{FavoriteIdList:e},function(e,n){return e?t(e):t(null,n)})},isMyFavorites:function(e,t){r.send("ismyfavorites",{QueryList:e},t)},getGroupInfo:function(e){r.send("GetTagList",{},function(t,n){return t?e(t):e(null,n)})},createNewGroup:function(e,t){r.send("newtag",{TagName:e},function(e,n){return e?t(e):t(null,n)})},collectIt:function(e,t){r.send("addproducttag",{FavoriteIDs:h5collect.FavoriteIDs,TagIDs:e},function(e,n){return e?t(e):n.ResultCode==-3||n.ResultCode==-2||n.ResultCode==-1?(console.error("<h5.ui.collect> errorsï¼"+n.ResultMessage),t(!0)):t(null,n)})},validateGroupName:function(e,t){var n=this;if(!(e&&typeof e=="string"&&e.length>0))return t({errorMsg:"è¯·å¡«ååç»åç§°"});if(!(this.lastVal!==e&&h5collect.groupNameList.indexOf(e)<0))return t({errorMsg:"æ¨è¾å¥çåç»åç§°å·²å­å¨ï¼è¯·éæ°è¾å¥"});if(e.replace(/[\u4e00-\u9fa5]/g,"--").length>18)return t({errorMsg:"åç»åç§°ä¸å¯è¶è¿18ä¸ªå­ç¬¦"});if(/[\<\>]/.test(e))return t({errorMsg:"åç»åç§°ä¸å¯åå«â<>âç­å­ç¬¦"});this.lastVal=e,this.createNewGroup(e,function(e,r){if(e)return t(e);n.collectIt(r.TagID,function(e,n){return e?t(e):t(null,n)})})}};return i}),n("collect",["class","base","model",r("collect")],function(e,t,n,r){var i=new e;return window.h5collect||(window.h5collect={}),h5collect.groupNameList=[],i.include({init:function(){var e=arguments[0];if(!e||typeof e!="object")e={};this.parent=t.parent(e.parent),this.query=n,this.elem=$(r),this.favoirteTags=this.elem.find(".pop-group-list"),this.mask=this.elem.find(".cp-h5-mask")},save:function(e,n){var r=this;if(!e||typeof e!="object"||typeof n!="function"||!t.isArray(e.FavoriteList))return n({errorMsg:"FavoriteListåæ°éè¯¯"});var i=e.FavoriteList,s=e.Channel||null;this.query.addProduct(i,s,function(e,i){if(e)return n(e);typeof window["__bfi"]=="undefined"&&(window.__bfi=[]),window.__bfi.push(["_tracklog","COLLECT_FROM","from="+t.isInApp()?"Hybrid":"H5"]),h5collect.FavoriteIDs=i.FavoriteIdList,r.group(function(e){return e?n(e):n(null,{FavoriteIDs:h5collect.FavoriteIDs})})})},isMyFavorites:function(e,n){if(!e||typeof e!="object"||typeof n!="function"||!t.isArray(e.QueryList))return n({errorMsg:"QueryListåæ°éè¯¯"});var r=e.QueryList,i=[],s=[];r.forEach(function(e){i.push(e.ProductID),s.push(null)}),this.query.isMyFavorites(r,function(e,r){if(e)return t.prompt("ç½ç»éè¯¯ï¼è¯·éè¯"),n(e);var o=r&&r.ResultList||[],u;return o.forEach(function(e){var t=i.indexOf(parseInt(e.ProductID,10));t>-1&&(i[t]=!0,s[t]=e.FavoriteID,u=!0)}),i.forEach(function(e,n){t.isBool(e)||(i[n]=!1,u=!1)}),n(null,{result:i,FavoriteIDs:s,success:u})})},cancel:function(e,n){var r=Array.isArray(e)?e:[e];this.query.deleteProduct(r,function(e,r){return e?(t.prompt("åæ¶æ¶èå¤±è´¥"),n(e)):(t.prompt("åæ¶æ¶èæå"),n(null,r))})},fn:function(e){var n=this;return this.collectView=$(".cp-h5-collect"),this.newGroupView=$(".cp-h5-newGroup"),this.cancelBtn=$(".cui-btns-cancel"),this.sureBtn=$(".cui-btns-sure"),this.groupInput=$(".group-new-input"),this.mask=$(".cp-h5-mask"),this.createNewGroupBtn=$(".cp-newGroupBtn"),this.clearVal=$(".group-clear-val"),{inputEvents:function(e){var t=$(e.target).val().length>0;n.clearVal[t?"show":"hide"]()},joinGroupView:function(){n.collectView.hide(),n.newGroupView.show(),n.groupInput.focus()},cancelGroupView:function(){n.collectView.show(),n.newGroupView.hide()},groupViewCompatible:function(){t.isInApp()||n.newGroupView.css({top:"150px"})},clearInput:function(){n.newGroupView.css({top:"50%"}),n.groupInput.val(""),n.clearVal.hide()},closeAllView:function(){return n.collectView.hide(),n.mask.hide(),t.prompt("å·²æ·»å è³âæªåç»â"),n.$fn&&(n.$fn=null),e(null,!0)},createNewGroupEntity:function(){n.query.validateGroupName(n.groupInput.val(),function(r){if(r){t.prompt(r.errorMsg||"ç½ç»éè¯¯ï¼è¯·éè¯");return}return t.prompt("å·²æ·»å è³â"+n.groupInput.val()+"â"),n.collectView.hide(),n.newGroupView.hide(),n.mask.hide(),n.groupInput.val(""),e(null,!0)})},saveToMyFavorite:function(r){var i=$(r.target).attr("tagid"),s=$(r.target).text();if(!i)return;n.query.collectIt(i,function(r){if(r){t.prompt("ç½ç»éè¯¯ï¼è¯·éè¯");return}return t.prompt("å·²æ·»å è³â"+s+"â"),n.collectView.hide(),n.newGroupView.hide(),n.mask.hide(),e(null,!0)})}}},group:function(e){var n=this;this.query.getGroupInfo($.proxy(function(r,i){if(r&&r.errorMsg==="notLoggedIn")return e({errorMsg:r.errorMsg});h5collect.groupNameList=[];var s="";$(i.TagList).each(function(e,t){t.TagID!=0&&t.TagID!=-100&&t.TagName!=="æ»ç¥"&&(s+="<li class='pop-group-list-item' TagID=\""+t.TagID+'">'+t.TagName+"</li>"),h5collect.groupNameList.push(t.TagName)}),this.favoirteTags.html(s),t.has(".cp-h5-collect")?this.newGroupView.css("display")==="none"&&this.collectView.show()&&this.mask.show():this.parent.append(this.elem),this.$fn=this.fn.call(n,e),t.delegate({"keyup .group-new-input":this.$fn.inputEvents,"click .group-new-input":this.$fn.groupViewCompatible,"click .group-clear-val":this.$fn.clearInput,"click .i-close":this.$fn.closeAllView,"click .cui-btns-sure":this.$fn.createNewGroupEntity,"click .pop-group-list-item":this.$fn.saveToMyFavorite,"click .cp-newGroupBtn":this.$fn.joinGroupView,"click .cui-btns-cancel":this.$fn.cancelGroupView}),this.$fn=null},this))}}),i}),n("prompt",["class","base"],function(e,t){var n=new e,r=["cp-promptMask","cm-modal--alert"],i="keepheader,keepfooter,fullscreen,keepboth",s={prompt:'<div class="cp-promptMask cui-view cui-mask cui-opacitymask" style="position:absolute; left: 0px; top: 0px; background: rgba(0,0,0,.5); width:100%; height:100%"></div><section class="cm-modal cm-modal--alert"><div class="cm-modal-bd"></div><div class="cm-actions"></div></section>'},o=!1;n.include({init:function(){var e=arguments[0];if(!e||typeof e!="object")e={};this.parent=t.parent(e.parent),this.screen=typeof e.screen=="string"&&i.indexOf(e.screen.toLowerCase())>-1?e.screen.toLowerCase():"keepheader",this.zIndex=e.zIndex&&typeof e.zIndex=="number"&&!isNaN(e.zIndex)?e.zIndex:10,this.message=e.message&&{}.toString.call(e.message)=="[object Object]"?e.message:{title:"æ é¢éç½®ä¸æ­£ç¡®"},this.buttons=e.buttons&&t.isArray(e.buttons)?e.buttons:[],this.autoHide=e.autoHide&&typeof e.autoHide=="boolean"?e.autoHide:!1,this.timeout=e.timeout&&typeof e.timeout=="number"&&!isNaN(e.timeout)&&e.timeout>0?e.timeout:1e3,this.hidecallback=e.hidecallback;var n=t.isNumeric(e.header)?e.header:$("header").height(),r=t.isNumeric(e.footer)?e.footer:$("footer").height();this.t=n===null?0:n,this.b=r===null?0:r},__open:function(e,t){var n=this,r=$(t),i=r.eq(0),s;this.screen==="keepheader"?i.css({top:this.t,bottom:0}):this.screen==="keepfooter"?i.css({bottom:this.b,top:0}):this.screen==="fullscreen"?i.css({top:0,bottom:0}):this.screen==="keepboth"?i.css({top:this.t,bottom:this.b}):i.css({top:this.t,bottom:0}),i.css("zIndex",this.zIndex),r.eq(1).css("zIndex",this.zIndex+1),this.parent.append(r),s=r.find(".cm-modal-bd"),this.message.content?s.html('<h3 class="cm-alert-title">'+this.message.title+'</h3><div class="cm-mutil-lines">'+this.message.content+"</div>"):this.message.title?s.html("<p>"+this.message.title+"</p>"):s.html("<p>æ²¡ææ é¢</p>"),n.__btns(),$(".cp-promptMask").css("height",$(document).height()),$(".cm-modal").css("display","block"),this.currentElement=r},__btns:function(){var e=this,t=$(".cm-actions"),n=[];if(this.buttons.length<=0)return;this.buttons.length>2&&t.addClass("cm-actions--full");for(var r=0;r<=this.buttons.length-1;r++)t.append('<span class="cm-actions-btn">'+this.buttons[r].text+"</span>"),function(n){t.find(".cm-actions-btn").eq(n).off().on("click",function(){e.buttons[n].callback($.proxy(e.__close,e))})}(r)},__close:function(){o?this.currentElement.hide():this.currentElement.remove()},prompt:function(e){var t=this;e&&(this.message.title=e.message.title,this.message.content=e.message.content,this.buttons=e.buttons||[],this.autoHide=e.autoHide,this.timeout=e.timeout,this.hidecallback=e.hidecallback);var n=this.timeout,i=this.autoHide;t.__open(r[0],s.prompt),i&&setTimeout(function(){o()},n);var o=function(){t.__close(),!!t.hidecallback&&typeof t.hidecallback=="function"&&t.hidecallback()}},checkNetStatus:function(){var e=this,t=new n({zIndex:3e3,parent:"#main",screen:"FullScreen",message:{title:"ç½ç»è¿æ¥å·²å³é­",content:"å¯å¨èçªç§»å¨æ°æ®æWi-Fiæ¥è®¿é®æ°æ®ï¼"},autoHide:!1,buttons:[{text:"ç¥éäºï¼",callback:function(e){e()}}]});setTimeout(function(){t.prompt()},300)}});if(t.isInApp()){var u=new Image,a="http://m.ctrip.com/favicon.ico?";setTimeout(function(){u.src=a+"t="+(new Date).getTime(),u.addEventListener("error",function(){var e=new Image;e.src=a+"t="+(new Date).getTime(),e.addEventListener("error",function(){n.prototype.checkNetStatus()})})},100)}else navigator.onLine||n.prototype.checkNetStatus();return n}),n("ctripmenu",["base",r("menu_app"),r("menu_online")],function(e,t,n){var r=function(){var i=arguments[0],s=r,o=navigator.userAgent.match(/Ctrip_Pad_App/i),u=location.href.indexOf("for=test")>0;s.isInApp=e.isInApp(),s.isShowing=!1,s.Base64=e.base64,s.isLogin=e.isLogin,s.loginAction=e.loginAction,s.sets={show:!1,bresize:!1,buName:"home"},i&&i.show&&(i.show=s.isInApp&&!o?!1:i.show),s.sets=i=$.extend(s.sets,i||{});var a=$("<div id='ctripmenu-wrap' class='sidebar-pad'></div>"),f,l;return s.isInApp||(a.html(t).find(".member").remove(),t=a.html()),l=".aside_fixed{position:fixed;top:-10px;}.aside{float:left;width:158px;_margin-right:13px;border:1px solid #ececec;border-top:1px solid #2577e3;border-bottom:1px solid #2577e3;}.sidenav{background-color:#f7f7f7;border-bottom:1px solid #ececec;font-family:microsoft yahei;color:#333}.sidenav a{position:relative;z-index:1;display:block;line-height:1;padding-left:4px;border-left:1px solid #e8e8e8;border-right:1px solid #e8e8e8;color:#333;_zoom:1}.sidenav a:hover{color:#06c;text-decoration:none}.sidenav dt a{padding-left:5px;font-size:14px}.sidenav dt a span{display:block;padding:14px 10px 14px 14px}.sidenav .ico_arr{position:absolute;border:5px solid #fcfcfc;border-top-color:#afafaf;border-bottom:0 none;font-size:0;line-height:0;overflow:hidden}.sidenav dt .ico_arr{top:18px;right:10px}.sidenav dt a:hover .ico_arr{border-top-color:#06c}.sidenav dd{display:none;position:relative;padding-bottom:5px}.sidenav dd a{padding-left:5px;border-top:1px solid #f7f7f7;border-bottom:1px solid #f7f7f7}.sidenav dd a span{display:block;padding:8px 10px 8px 24px}.sidenav dd a.more_order{position:relative;display:inline-block;margin:5px 0 10px 20px;padding:5px 28px 5px 14px;background-color:#e5f0ff;border-radius:20px}.sidenav dd a.more_order:hover{background-color:#2577e3;color:#fff}.sidenav dd a.more_order .ico_arr{top:8px;right:12px;border-color:#e5f0ff;border-top-color:#afafaf}.sidenav dd a.more_order:hover .ico_arr{border-color:#2577e3;border-top-color:#fff}.sidenav dd a.up_order .ico_arr{border:5px solid #e5f0ff;border-bottom-color:#afafaf;border-top:0 none}.sidenav dd a.up_order:hover .ico_arr{border-color:#2577e3;border-bottom-color:#fff}.ico_new2{position:absolute;z-index:3;width:24px;height:11px;top:16px;margin-left:5px;background-position:-162px -9px}.sidenav dd .ico_new2{top:9px}.hide_order{display:none}.sidenav .selected{width:auto;border-left-color:#2577e3;border-right-color:#fff;background-color:#06c;color:#06c}.sidenav dd .selected{border-color:#ececec #fff #ececec #ececec}.sidenav .selected span{background-color:#fff}.sidenav_c dt .ico_arr{border:5px solid #fcfcfc;border-bottom-color:#afafaf;border-top:0 none}.sidenav_c dt a:hover .ico_arr{border-bottom-color:#06c}.sidenav_c dd{display:block}.main{margin-left:159px}#main{height:auto}",f='.ctripmenu-pad .cui-warning-mask,.ctripmenu-pad .cui-pageview{left:150px!important;right:0;width:auto}.sidebar-pad{position:fixed;top:0;left:0;bottom:0;z-index:101;width:149px;font-size:16px;border-right:1px solid #AEAEAE;background-color:#EFEFEF;overflow-y: auto;}.sidebar-pad li{position:relative;height:60px;margin-top:1px;padding:0 10px;line-height:60px}.sidebar-pad li:first-child{margin-top:0}.sidebar-pad .current{color:#009FF3;background-color:#FFF}.sidebar-pad .multi-list{height:45px;padding-top:10px;line-height:1.5}.sidebar-pad li div{height:100%;padding-left:35px;white-space:nowrap;overflow:hidden;border-bottom:1px solid #CCC}.sidebar-pad li.multi-list span{display:block;font-size:12px;color:#999}.sidebar-pad li:before{content:"";position:absolute;top:50%;left:13px;width:25px;height:25px;background-image:url(https://pic.c-ctrip.com/h5/rwd_myctrip/un_sidebar@2x.png);background-repeat:no-repeat;background-size:50px 250px;-webkit-transform:translate(0,-50%);-ms-transform:translate(0,-50%);transform:translate(0,-50%)}.sidebar-pad .home:before{background-position:0 0}.sidebar-pad .home.current:before{background-position:-25px 0}.sidebar-pad .order:before{background-position:0 -25px}.sidebar-pad .order.current:before{background-position:-25px -25px}.sidebar-pad .wallet:before{background-position:0 -50px}.sidebar-pad .wallet.current:before{background-position:-25px -50px}.sidebar-pad .coupon:before{background-position:0 -75px}.sidebar-pad .coupon.current:before{background-position:-25px -75px}.sidebar-pad .point:before{background-position:0 -100px}.sidebar-pad .point.current:before{background-position:-25px 0}.sidebar-pad .favorite:before{background-position:0 -125px}.sidebar-pad .favorite.current:before{background-position:-25px -125px}.sidebar-pad .trip:before{background-position:0 -150px}.sidebar-pad .trip.current:before{background-position:-25px -150px}.sidebar-pad .member:before{background-position:0 -175px}.sidebar-pad .member.current:before{background-position:-25px -175px}.sidebar-pad .setting:before{background-position:0 -200px}.sidebar-pad .setting.current:before{background-position:-25px -200px}.sidebar-pad .about:before{background-position:0 -225px}.sidebar-pad .about.current:before{background-position:-25px -225px}#main{padding-left:150px;}@media screen and (max-width:2023px) and (min-width:479px){#main{padding-left:150px}#ctripmenu-wrap{width:149px;'+(s.isInApp?"top:0;":"top:44px;")+"}}@media screen and (max-width:479px){#ctripmenu-wrap{display:none;}#main{padding-left:0}#headerview header{left:0}}",s.tpl=u?n:t,s.cssText=u?l:f,s.getUri=function(e){if(s.isInApp)return location.host;var t=location.protocol+"//",n=location.host||"",r=/\w+\..*.com$/.test(n),i=r?n.split(".")[0]:"",o="",u=t+i;return n.match(/\.fat\d*\.qa\.nt\.ctripcorp\.com|^210\.13\.100\.191/i)?o=r?".fat19.qa.nt.ctripcorp.com":"m.fat19.qa.nt.ctripcorp.com":n.match(/\.fws\.qa\.nt\.ctripcorp\.com/i)?o=".fat19.qa.nt.ctripcorp.com":n.match(/\.uat\.qa\.nt\.ctripcorp\.com/i)?o=".uat.qa.nt.ctripcorp.com":n.match(/^10\.8\.2\.111/i)||n.match(/^10\.8\.5\.10/i)?o="10.8.5.10":n.match(/^(localhost|172\.16|127\.0)/i)?o=n:o=".ctrip.com",u+=o,e?{url:u,proto:t,host:n,isdomain:r,first:i,second:o}:u},s.onlineMenuJump=function(e){e.preventDefault();var t=$(e.currentTarget),n=$(".sidenav"),r=location.href,i,s;i=t.attr("href"),r.indexOf("fat")>0?(s=t.hasClass("navhome")||t.hasClass("allorders")?"fat19":"fat49",i=i.replace(/ctrip/,s+".qa.nt.ctripcorp")):r.indexOf("uat")>0&&(i=i.replace(/ctrip/,"uat.qa.nt.ctripcorp")),t.find(".ico_arr").length>0?t.parents(".sidenav").hasClass("sidenav_c")?t.parents(".sidenav").removeClass("sidenav_c"):(n.removeClass("sidenav_c"),t.parents(".sidenav").addClass("sidenav_c")):!t.hasClass("selected")&&(window.location.href=i)},s.menuLinkJump=function(e){var t=$(e.currentTarget),n=s.getUri(!0),r=n.isdomain?"http://m"+n.second:"http://"+n.second;r+=t.data("href");if(s.isInApp&&!t.hasClass("current")){var i=t.data("app")||t.data("href");t.hasClass("setting")?CtripUtil.app_open_url("ctrip://wireless/myctrip_setconfig",1):t.hasClass("trip")?CtripUtil.app_open_url(i,2,"ä¸ççæè¡"):CtripUtil.app_open_url(i,4)}else!t.hasClass("current")&&(window.location.href=r)},s.walletLinkJump=function(e){var t="#index",n=s.getUri(!0),r=n.isdomain?"https://secure"+n.second.replace(".fat19.",".fws."):"https://"+n.second,i=n.isdomain?"http://m"+n.second:"http://"+n.second,o=r+"/webapp/wallet/index.html",u=i+"/webapp/myctrip/index.html",a={from:u,eback:u};o=o+t+"?token="+encodeURIComponent(s.Base64(JSON.stringify(a))),s.isInApp?CtripUtil.app_open_url("wallet/index.html#index",4):window.location.href=o},s.couponLinkJump=function(){var e=s.getUri(!0),t=e.isdomain?"https://smarket"+e.second.replace(".fat19.",".fat21."):"https://"+e.second;t+="/webapp/promocode/#index";var n=JSON.parse(localStorage.getItem("USERINFO"));if(s.isInApp)CtripUtil.app_open_url("promocode/index.html#index",4);else if(n&&n.data&&n.data.Auth){var r={auth:n.data.Auth};window.location.href=t+(t.indexOf("?")>0?"&":"?")+"token="+encodeURIComponent(s.Base64(JSON.stringify(r)))}},s.windowScroll=function(){var e=document.body.scrollTop||document.documentElement.scrollTop;e>110?$(".aside").addClass("aside_fixed"):$(".aside").removeClass("aside_fixed")},s.init=function(e){if(!e){console.log("method is not supply param obj.");return}var t=/iPad/.test(navigator.userAgent)||$(window).width()>767||o,n="."+e.buName,r=$("body").find("#ctripmenu-wrap"),i=r.find("ul");if(e.show&&s.isLogin())if(t){if(!$("#ctripmenu-style").length){if(e.buName=="home"||e.buName=="favorite")s.cssText=s.cssText+"#ctripmenu-wrap{top: 0;}";$('<style id="ctripmenu-style">').html(s.cssText).appendTo(document.head)}r.length===0?(u?$(".myctrip_wrap")&&$(a.html(s.tpl)).prependTo($(".myctrip_wrap")):$("body").append(a.html(s.tpl)),i=$("#ctripmenu-wrap ul"),$onlineSideNav=$(".sidenav"),i.find("[data-href]").bind("click",s.menuLinkJump),$("#ctripmenu_wallet").bind("click",s.walletLinkJump),$("#ctripmenu_coupon").bind("click",s.couponLinkJump),$(".sidenav").find("a").bind("click",s.onlineMenuJump),$(window).bind("scroll",s.windowScroll),i.find("li").removeClass("current"),i.find(n).addClass("current"),$onlineSideNav.find(".selected").removeClass("selected"),location.href.indexOf("index")>0?$(".navhome").addClass("selected"):$(".allorders").addClass("selected")):(r.show(),i.find("li").removeClass("current"),i.find(n).addClass("current"),$onlineSideNav.find(".selected").removeClass("selected"),location.href.indexOf("index")>0?$(".navhome").addClass("selected"):$(".allorders").addClass("selected")),$("body").addClass("ctripmenu-pad"),s.isShowing=!0}else $("body").removeClass("ctripmenu-pad"),s.isShowing=!1;else $("#ctripmenu-style").remove(),$("body").removeClass("ctripmenu-pad"),r.hide(),s.isShowing=!1},s.reinit=function(e){return $("#ctripmenu-wrap").remove(),$("#ctripmenu-style").remove(),s.sets=i=$.extend(i,s.sets||{}),s.init(e||i)},s.init(i),s.sets.bresize&&(window.onresize=function(){s.reinit()}),s.isShowing};return r}),n("pull",["class","base"],function(e,t){var n=new e;return n.include({init:function(){var e=arguments[0];if(!e||!t.isObject(e))return;this.upParent=e.upParent&&$(e.upParent),this.downParent=e.downParent&&$(e.downParent),this.zIndex=e.zIndex||1,this.type()},type:function(){var e=this;this.up={loading:function(){return e.template("upLoading")},loadFailed:function(){return e.template("upLoadFailed")},loadNoResult:function(){return e.template("upLoadNoResult")},loadMore:function(){return e.template("upLoadMore")}},this.down={freshAble:function(){return e.template("downFreshAble")},freshDrop:function(){return e.template("downFreshDrop")},freshDropLimit:function(){return e.template("downFreshDropLimit")},loading:function(){return e.template("downLoading")},loadSuccess:function(){return e.template("downLoadSuccess")},loadFailed:function(){return e.template("downLoadFailed")}}},template:function(e){var t,n;n=/up/.test(e)?"up":"down";var r=n==="up"?this.upParent:this.downParent,i="default";switch(e){case"upLoading":t='<i class="i-loading"></i>æ­£å¨å è½½ä¸­...';break;case"upLoadFailed":t='<i class="i-loadingFailed"></i>å è½½æªæåï¼è¯·ç¨ååè¯';break;case"upLoadNoResult":t="æ²¡ææ´å¤ç»æäº";break;case"upLoadMore":t="ç¹å»å è½½æ´å¤";break;case"downFreshAble":t='<i class="i-loading"></i>ä¸æå¯å·æ°',i="default";break;case"downFreshDrop":t='<i class="i-loading"></i>éæ¾å¯å·æ°',i="touch";break;case"downFreshDropLimit":t='<i class="i-loading"></i>éæ¾å¯å·æ°',i="over";break;case"downLoading":t='<i class="i-loading"></i>å·æ°ä¸­...',i="ing";break;case"downLoadSuccess":t='<i class="i-loadingSucc"></i>å·æ°æå',i="succeed";break;case"downLoadFailed":t='<i class="i-loadingFailed"></i>æªå·æ°æåï¼è¯·ç¨ååè¯å§',i="failed"}var s=n==="up"?$('<div class="cp-h5-main"><div class="loadText-box"><p>'+t+"</p></div></div>"):$('<div class="cp-h5-main"><div class="loadRefresh-'+i+'-box"><p class="refresh_slogan">æºç¨å¨æï¼è¯´èµ°å°±èµ°ï¼</p><p></p>'+t+"</p></div></div>");return{show:function(){s.css({zIndex:this.zIndex}),s.appendTo(r)},hide:function(){s&&s.remove()}}}}),n}),n("pulldown",["class","base"],function(e,t){var n=new e,r={loadRefresh:'<div class="loadRefresh-over-box"><div class="slogan"><p class="refresh_slogan">æºç¨å¨æï¼è¯´èµ°å°±èµ°ï¼</p><p><i class="i-loading"></i><span>éæ¾å¯å·æ°</span></p></div></div>',loadText:'<div class="loadText-box"><p><i class="i-loading"></i><span>æ­£å¨å è½½ä¸­...</span></p></div><style>.loadRefresh-over-box { position:absolute; top:0; height:0;width:100%; overflow:hidden;background: #efefef url(http://pic.c-ctrip.com/h5/rwd_myctrip/cove@2x.png) center bottom no-repeat ;text-align: center; display: box; display: -webkit-box; display: -moz-box;-webkit-box-pack:center; -moz-box-pack:center; -webkit-box-align:center; -moz-box-align:center; }.loadRefresh-over-box .slogan {width:100%}.loadRefresh-over-box p.refresh_slogan {width:100%; height: 21px; margin:0; background:url(http://pic.c-ctrip.com/h5/rwd_myctrip/botom-logo@2x.png) center 0 no-repeat;text-indent:-999em;overflow:hidden;-webkit-background-size:177px auto;background-size:177px auto;}.loadRefresh-over-box .i-loading {width: 13px;height: 14px;margin-right: 5px;display: inline-block;vertical-align: middle;background:url(http://pic.c-ctrip.com/h5/rwd_myctrip/loading@2x.png) no-repeat -160px -67px;background-size: 180px auto;}.loadRefresh-ing-box{height:61px;padding:20px 0 19px 0;background: #efefef;}.i-loading2{-webkit-animation:loading 1s linear 0s infinite;animation:loading 1s linear 0s infinite;}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);}100%{-webkit-transform:rotate(360deg);}}@keyframes loading{0%{transform:rotate(0);}100%{transform:rotate(360deg);}}.loadRefresh-over-box .i-loadingSucc,.loadText-box .i-loadingSucc{display: inline-block;width:13px;height:8px;margin-right:6px;border:2px solid #13b418;border-width:0 0 2px 2px;-webkit-transform:translate(0,-5px) rotate(-45deg);-ms-transform:translate(0,-5px) rotate(-45deg);-o-transform:translate(0,-5px) rotate(-45deg);transform:translate(0,-5px) rotate(-45deg);}.loadRefresh-over-box .i-loadingFailed{position: relative;margin-right:10px;}.loadRefresh-over-box .i-loadingFailed::before,.loadRefresh-over-box .i-loadingFailed::after{position: absolute;top:50%;left:50%;content:"";background:#ee693b;-webkit-transform:rotate(45deg);transform:rotate(45deg);}.loadRefresh-over-box .i-loadingFailed::before{width:2px;height:14px;margin-left:-1px;margin-top:-7px;}.loadRefresh-over-box .i-loadingFailed::after{width:14px;height:2px;margin-top:-1px;margin-left:-7px;}.loadText-box{ position:relative; display:none; width:100%; height:35px;line-height:35px;text-align:center; }.loadText-box p {font-size:12px;color: #666;}.loadText-box .i-loading {width:12px;height: 13px;margin-right:5px;display: inline-block;background:url(http://pic.c-ctrip.com/h5/rwd_myctrip/un_icon_loading@2x.png) 0 0 no-repeat;background-size: 19px auto;vertical-align: middle;-webkit-animation:loading 1s linear 0s infinite;animation:loading 1s linear 0s infinite;}.loadText-box .i-loadingFailed{position: relative;margin-right:10px;}.loadText-box .i-loadingFailed::before,.loadText-box .i-loadingFailed::after{position: absolute;top:50%;left:50%;content:"";background:#ee693b;-webkit-transform:rotate(45deg);transform:rotate(45deg);}.loadText-box .i-loadingFailed::before{width:2px;height:14px;margin-left:-1px;margin-top:-7px;}.loadText-box .i-loadingFailed::after{width:14px;height:2px;margin-top:-1px;margin-left:-7px;}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);}100%{-webkit-transform:rotate(360deg);}}@keyframes loading{0%{transform:rotate(0);}100%{transform:rotate(360deg);}}</style>'};return n.include({init:function(){var e=arguments[0];if(!e||typeof e!="object")e={};this.parent=e.parent||"",this.self=e.self||"",this.header=e.header||"",this.topcallback=e.topCallback,this.bottomcallback=e.bottomCallback,this.tsp=0,this.movedis=0,this.dis=0,this.SCROLLH=$(window).height()-$(this.self).offset().top,this.topkeepdis=80,this.bottomloaded=!0,$(this.parent).append(r.loadRefresh),$(this.parent).append(r.loadText),this.loadRefresh=$(".loadRefresh-over-box"),this.loadText=$(".loadText-box"),this.freshi=this.loadRefresh.find("i"),this.freshspan=this.loadRefresh.find("span"),this.texti=this.loadText.find("i"),this.textspan=this.loadText.find("span"),this.parent!="body,document"&&this.parent&&$(this.parent).css("position")=="static"&&$(this.parent).css({position:"relative"})},__touch:function(e){var t=this,e=e||e.target,n=$(this.self);switch(e.type){case"touchstart":this.tsp=e.targetTouches[0].clientY;break;case"touchend":this.__gesture(),this.__endTop(n);break;case"touchmove":this.movedis=e.targetTouches[0].clientY-this.tsp,this.dis=this.movedis/2,this.__gesture()=="down"&&this.__ontop()&&this.__down(this.dis)}},__down:function(e){var t=$(this.self);this.__freshMotion(e),this.__transform(t,e),e>0&&e<=20?this.freshspan.text("ä¸æå¯å·æ°"):e>=100&&this.freshspan.text("éæ¾å¯å·æ°")},__endTop:function(e){var t=this;this.dis>100&&this.__gesture()=="down"&&this.__ontop()?(this.freshspan.text("å·æ°ä¸­..."),this.freshi.addClass("i-loading2"),this.__move(this.dis,-5,e,t.topkeepdis),this.__callback(this.topcallback),this.dis=t.topkeepdis,this.removes()):this.__gesture()=="down"&&this.__ontop()&&this.__move(this.dis,-5,e,5)},__callback:function(e){var t=this;if(!!e&&typeof e=="function"){if(e==t.topcallback)return e&&e(function(){!arguments[0]||t.__close("top",arguments[0])});if(e==t.bottomcallback)return e&&e(function(){!arguments[0]||t.__close("bottom",arguments[0])})}},__close:function(e,t){var n=this,r=$(this.self);if(e=="top"){switch(t){case"success":this.freshspan.text("å·æ°æå"),this.freshi.removeClass().addClass("i-loadingSucc");break;case"failed":this.freshspan.text("æªå è½½æåï¼ç¨ååè¯å§"),this.freshi.removeClass().addClass("i-loadingFailed")}this.__runTop(r)}else{switch(t){case"success":this.textspan.text("å è½½æå"),this.texti.removeClass().addClass("i-loadingSucc");break;case"failed":this.textspan.text("å è½½æªæåï¼è¯·ç¨ååè¯"),this.texti.removeClass().addClass("i-loadingFailed");break;case"nomore":this.textspan.text("æ²¡ææ´å¤ç»æäº"),this.texti.removeClass()}this.__runBottom(r)}},__runTop:function(e){var t=this;setTimeout(function(){t.__move(t.topkeepdis,-5,e,5),t.scroll()},800)},__runBottom:function(e){var t=this;setTimeout(function(){t.loadText.css("display","none"),t.textspan.text("æ­£å¨å è½½ä¸­..."),t.texti.removeClass().addClass("i-loading"),t.bottomloaded=!0,t.scroll()},800)},__bind:function(e){var t=this;return function(){t.apply(e,arguments)}},__move:function(e,t,n,r){var i=this,s=setInterval(function(){e+=t,e<=r&&(e=r-5,i.dis=0,clearInterval(s)),i.__freshMotion(e),i.__transform(n,e)},5)},__transform:function(e,t){$(e).css({"-webkit-transform":"translateY("+t+"px)",transform:"translateY("+t+"px)"})},__freshMotion:function(e){this.loadRefresh.css("height",e+"px"),e<=0&&this.freshi.removeClass().addClass("i-loading")},__onbottom:function(){$(this.self).height()-this.SCROLLH==document.body.scrollTop&&this.bottomloaded&&(this.loadText.css({display:"block"}),this.__callback(this.bottomcallback),this.bottomloaded=!1,this.removes())},__ontop:function(){if(document.body.scrollTop==0)return!0},__gesture:function(){var e=5;if(this.movedis==0||Math.abs(this.movedis)<e)return"click";if(this.movedis>0&&Math.abs(this.movedis)>=e)return"down";if(this.movedis<0&&Math.abs(this.movedis)>=e)return"up"},scroll:function(){$(window,document).on("scroll",this.__onbottom.bind(this)),$(this.self).on("touchstart",this.__touch.bind(this)),$(this.self).on("touchmove",this.__touch.bind(this)),$(this.self).on("touchend",this.__touch.bind(this))},removes:function(){$(this.self).off("touchstart"),$(this.self).off("touchmove"),$(this.self).off("touchend")}}),n}),n("text!template/collect.html",[],function(){return'<div class="cp-h5-main">\r\n	<div class="cui-view cui-layer cui-alert cp-h5-collect" id="cui-1415327286173" style="margin-left:-150px;margin-top:-137px;z-index:10000;width:auto">\r\n		<div class="cui-pop-box group-select-modal">\r\n			<div class="cui-hd group-select-hd">\r\n				<i class="i-select-success"></i>æ¶èæå<i class="i-close"></i>\r\n			</div>\r\n			<div class="cui-bd">\r\n				<p class="groupText">\r\n					åç»å°ï¼\r\n				</p>\r\n				<ul class="pop-group-list">\r\n				</ul>\r\n				<div class="cp-newGroupBtn">\r\n					<i class="i-plus"></i>æ°åç»\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="cui-view cui-layer cui-alert cp-h5-newGroup" id="cui-1415327286173" style="margin-left:-141px;margin-top:-79px;z-index:10000;width:auto;display:none;">\r\n		<div class="cui-pop-box">\r\n			<div class="cui-bd">\r\n				<div class="cui-error-tips">\r\n					<p style="padding-bottom:10px;font-weight:bold">\r\n						æ°å»ºåç»\r\n					</p>\r\n					<input type="text" placeholder="åç»åç§°" class="group-new-input"><i class="group-clear-val" style="display:none;position: absolute; background-color: #ccc; font-size:18px; height: 18px; width: 18px; right: 32px; top: 63px; border-radius: 11px; line-height:18px;text-align:center; color:#fff;">Ã</i>\r\n				</div>\r\n				<div class="cui-roller-btns">\r\n					<div class="cui-flexbd cui-btns-cancel">\r\n						åæ¶\r\n					</div>\r\n					<div class="cui-flexbd cui-btns-sure">\r\n						ç¡®è®¤\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="cui-view cui-mask cui-opacitymask cp-h5-mask" id="cui-1415327286174" style="position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; z-index: 9999;">\r\n	</div>\r\n	<div class="cp-h5-collect-toast" style="left:50%; margin-left:-130px; visibility: visible; z-index: 113003; top: 50%; position: fixed; display: none;">\r\n		<div style="width: 220px; line-height: 24px; border-radius: 5px; background: rgba(0,0,0,.7); padding: 10px 15px; color: #fff; font-weight: 700; text-align: center; word-break: break-all;">\r\n			<div class="cui-layer-content">\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),n("text!template/menu_app.html",[],function(){return'<ul>\r\n    <li class="home current" data-href="/webapp/myctrip/index" data-app="myctrip/index.html">\r\n        <div>æçæºç¨</div>\r\n    </li>\r\n    <li class="order" data-href="/webapp/myctrip/orders/allorders" data-app="myctrip/index.html#orders/allorders">\r\n        <div>è®¢å</div>\r\n    </li>\r\n    <li id="ctripmenu_wallet" class="wallet">\r\n        <div>é±å</div>\r\n    </li>\r\n    <li id="ctripmenu_coupon" class="coupon">\r\n        <div>ä¼æ å¸</div>\r\n    </li>\r\n    <li class="point" data-href="/webapp/cpage/mypoints" data-app="cpage/index.html#mypoints">\r\n        <div>ç§¯å</div>\r\n    </li>\r\n    <li class="favorite" data-href="/webapp/favorite/index.html" data-app="favorite/index.html">\r\n        <div>æ¶è</div>\r\n    </li>\r\n    <li class="trip" data-href="/webapp/you/lifejourney/home?responsive=1" data-app="http://m.ctrip.com/webapp/you/lifejourney/home?responsive=1">\r\n        <div>ä¸ççæè¡</div>\r\n    </li>\r\n    <li class="member" data-href="destination/user/index.html#/?fromMyCtrip=1">\r\n        <div>ç¤¾åº</div>\r\n    </li>\r\n    <li class="setting multi-list" data-href="/webapp/myctrip/common/setting">\r\n        <div>è®¾ç½®<span>å¸¸ç¨ä¿¡æ¯ãè®¢é</span>\r\n        </div>\r\n    </li>\r\n    <li class="about" data-href="/webapp/myctrip/common/about" data-app="myctrip/index.html#common/about">\r\n        <div>å³äº</div>\r\n    </li>\r\n</ul>\r\n'}),n("text!template/menu_online.html",[],function(){return'<div id="sideNav" class="aside clearfix"> \r\n   <dl class="sidenav sidenav_c"> \r\n    <dt>\r\n     <a href="http://m.ctrip.com/webapp/myctrip/index?for=test" class="navhome selected"><span>æçæºç¨é¦é¡µ</span></a>\r\n    </dt> \r\n   </dl>    \r\n   <dl class="sidenav sidenav_c"> \r\n    <dt>\r\n     <a href="http://m.ctrip.com/webapp/myctrip/orders/allorders?for=test" class="allorders"><span>è®¢å</span></a>\r\n    </dt>     \r\n   </dl> \r\n   <dl class="sidenav"> \r\n    <dt>\r\n     <a href="javascript:;"><span>é±å</span><i class="ico_arr"></i></a>\r\n    </dt> \r\n    <dd>     \r\n     <a href="https://secure.ctrip.com/Balance-GiftCard/zh-cn/TravelTicket.aspx"><span>ç¤¼åå¡</span></a>\r\n     <a href="https://secure.ctrip.com/Payment-Base-UsedCardList/zh-cn/UsedCardList.aspx"><span>é¶è¡å¡</span></a>\r\n     <a href="https://secure.ctrip.com/Balance-CashAccount/zh-cn/CashAccount.aspx"><span>è¿ç°è´¦æ·</span></a>\r\n     <a href="https://secure.ctrip.com/Payment-Base-PaymentPwd/Wallet/View/WalletSafetyIndex.aspx"><span>å®å¨ä¸­å¿</span></a>\r\n    </dd> \r\n   </dl> \r\n   <dl class="sidenav"> \r\n    <dt>     \r\n     <a href="https://smarket.ctrip.com/Promocode/zh-cn/Promocode.aspx"><span>ä¼æ å¸</span></a>\r\n    </dt>\r\n   </dl> \r\n\r\n   <dl class="sidenav"> \r\n    <dt>     \r\n     <a href="https://sinfo.ctrip.com/MyInfo/AccountCenter/MyMileage.aspx"><span>ç§¯å</span></a>\r\n    </dt>\r\n   </dl>\r\n\r\n   <dl class="sidenav"> \r\n    <dt>     \r\n     <a href="http://my.ctrip.com/FavoriteOnline/hotel/hotellist.aspx"><span>æ¶è</span></a>\r\n    </dt>\r\n   </dl>\r\n\r\n   <dl class="sidenav"> \r\n    <dt>\r\n     <a href="javascript:;"><span>ä¸ªäººä¸­å¿</span><i class="ico_arr"></i></a>\r\n    </dt> \r\n    <dd> \r\n     <a href="https://sinfo.ctrip.com/MyInfo/AccountCenter/UserInfoUpdate.aspx"><span>æçä¿¡æ¯</span></a>\r\n     <a href="http://my.ctrip.com/Home/Third/TrdManager.aspx"><span>ç»å®ä¸å³è</span></a>\r\n     <a href="https://sinfo.ctrip.com/MyInfo/AccountCenter/AccountSecurity.aspx"><span>è´¦æ·å®å¨</span></a>  \r\n    </dd> \r\n  </dl>\r\n\r\n   <dl class="sidenav"> \r\n    <dt>\r\n     <a href="javascript:;"><span>å¸¸ç¨ä¿¡æ¯</span><i class="ico_arr"></i></a>\r\n    </dt> \r\n    <dd>\r\n     <a href="http://my.ctrip.com/Home/Passenger/PassengerList.aspx"><span>å¸¸ç¨æå®¢ä¿¡æ¯</span></a>\r\n     <a href="http://my.ctrip.com/Home/Address/AddressList.aspx"><span>å¸¸ç¨å°å</span></a>\r\n     <a href="http://my.ctrip.com/Home/Invoice/InvoiceList.aspx"><span>å¸¸ç¨åç¥¨</span></a>\r\n    </dd> \r\n   </dl> \r\n\r\n   <dl class="sidenav"> \r\n    <dt>\r\n     <a target="_blank" href="http://you.ctrip.com/members/"><span>ç¤¾åº</span></a>\r\n    </dt> \r\n   </dl> \r\n\r\n   <!-- <dl class="sidenav"> \r\n    <dt>\r\n     <a target="_blank" href="http://you.ctrip.com/members/"><span>åè®®ä¿±ä¹é¨</span></a>\r\n    </dt> \r\n   </dl> -->\r\n\r\n   <dl class="sidenav"> \r\n    <dt>\r\n     <a href="javascript:;"><span>åºç¨ä¸­å¿</span><i class="ico_arr"></i></a>\r\n    </dt> \r\n    <dd>\r\n     <a target="_blank" href="http://my.ctrip.com/adv/Loyalty/MyGrowup.aspx"><span>æçæé¿</span></a>\r\n     <a href="http://my.ctrip.com/Home/Order/OrderReviewList.aspx"><span>æçç¹è¯</span></a>\r\n     <a href="http://my.ctrip.com/Customer-API-Online/MyJourney.aspx"><span>æè¡æ¥ç¨</span></a>     \r\n     <a href="http://my.ctrip.com/subscription/Subscribe.aspx"><span>é®ä»¶è®¢é</span></a>\r\n    </dd> \r\n   </dl> \r\n</div>'}),{Network:t("network"),network:t("network"),Collect:t("collect"),collect:t("collect"),Prompt:t("prompt"),prompt:t("prompt"),CtripMenu:t("ctripmenu"),ctripMenu:t("ctripmenu"),Pull:t("pull"),pull:t("pull"),Base:t("base"),base:t("base"),pullDown:t("pulldown"),PullDown:t("pulldown")}});